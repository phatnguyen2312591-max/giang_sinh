<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√≥n Qu√† Gi√°ng Sinh C·ªßa B·∫°n</title>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #051937;
            background-image: radial-gradient(circle, #051937, #004d7a, #008793, #00bf72, #a8eb12);
            color: white;
            font-family: 'Arial', sans-serif;
            overflow: hidden; /* Kh√¥ng cho cu·ªôn trang */
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        /* --- M√†n h√¨nh 1: H·ªôp qu√† --- */
        #gift-screen {
            cursor: pointer;
            transition: transform 0.3s;
            z-index: 100;
        }
        
        #gift-screen:hover {
            transform: scale(1.1); /* Ph√≥ng to nh·∫π khi di chu·ªôt v√†o */
        }

        .gift-box {
            font-size: 150px;
            animation: shake 2s infinite; /* H·ªôp qu√† rung rinh m·ªùi g·ªçi */
        }

        .click-hint {
            margin-top: 20px;
            font-size: 1.2rem;
            color: #fff;
            animation: blink 1.5s infinite;
        }

        /* --- M√†n h√¨nh 2: L·ªùi ch√∫c (Ban ƒë·∫ßu ·∫©n ƒëi) --- */
        #celebration-screen {
            display: none; /* ·∫®n m·∫∑c ƒë·ªãnh */
            text-align: center;
            width: 90%;
            max-width: 600px;
            z-index: 50;
        }

        .main-photo {
            width: 250px;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            border: 5px solid white;
            margin-bottom: 20px;
        }

        h1 {
            font-size: 2.5rem;
            color: #ffeb3b;
            text-shadow: 2px 2px 4px #ff0000;
            margin: 10px 0;
        }

        /* Hi·ªáu ·ª©ng l·∫Øc l∆∞ chung */
        .wobble {
            animation: wobble 2s infinite ease-in-out;
            display: inline-block;
        }

        /* H√†ng icon ph·ª• h·ªça */
        .icons-row {
            font-size: 3rem;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .icon-item {
            animation: wobble 3s infinite ease-in-out; /* L·∫Øc ch·∫≠m h∆°n ·∫£nh ch√≠nh */
        }

        /* --- C√°c hi·ªáu ·ª©ng Animation (Chuy·ªÉn ƒë·ªông) --- */
        @keyframes shake {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            50% { transform: rotate(0deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        @keyframes wobble {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(10deg); }
            75% { transform: rotate(-10deg); }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Hi·ªáu ·ª©ng tuy·∫øt r∆°i */
        .snowflake {
            position: fixed;
            top: -10px;
            color: white;
            user-select: none;
            pointer-events: none;
            animation-name: fall;
            animation-timing-function: linear;
            z-index: 1;
        }

        @keyframes fall {
            to { transform: translateY(105vh); }
            /* --- (M·ªöI) Hi·ªáu ·ª©ng h·ªôp qu√† n·ªï tung --- */
        /* ƒê·ªãnh nghƒ©a ki·ªÉu rung l·∫Øc m·∫°nh v√† ph√≥ng to r·ªìi bi·∫øn m·∫•t */
        @keyframes violent-explode {
            0% { transform: scale(1) rotate(0deg); opacity: 1; }
            20% { transform: scale(1.1) rotate(-5deg) translate(-5px, 5px); color: red; } /* Rung m·∫°nh */
            40% { transform: scale(1.2) rotate(5deg) translate(5px, -5px); }
            60% { transform: scale(1.4) rotate(-5deg) translate(-5px, 5px); opacity: 0.8; } /* Ph√¨nh to */
            100% { transform: scale(2) rotate(0deg); opacity: 0; } /* Bi·∫øn m·∫•t h·∫≥n */
        }

        /* Class n√†y s·∫Ω ƒë∆∞·ª£c th√™m v√†o b·∫±ng Javascript khi b·∫•m */
        .gift-exploding {
            /* Ghi ƒë√® hi·ªáu ·ª©ng rung nh·∫π c≈© */
            animation: violent-explode 0.8s forwards ease-in !important; 
            pointer-events: none; /* Kh√¥ng cho b·∫•m l·∫°i l·∫ßn n·ªØa */
        }
        }
    </style>
</head>
<body>

    <div id="gift-screen" onclick="openGift()">
        <div class="gift-box">üéÅ</div>
        <div class="click-hint">Nh·∫•n v√†o h·ªôp qu√† ƒë·ªÉ m·ªü!</div>
    </div>

    <div id="celebration-screen">
        <img src="noel.jpg" class="main-photo wobble" alt="·∫¢nh Gi√°ng Sinh">
        
        <h1 class="wobble">Merry Christmas! üéÑ</h1>
        <p>Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng sinh ·∫•m √°p, h·∫°nh ph√∫c v√† tr√†n ƒë·∫ßy ni·ªÅm vui!</p>

        <div class="icons-row">
            <div class="icon-item">üéÖ</div>
            <div class="icon-item">‚õÑ</div>
            <div class="icon-item">ü¶å</div>
            <div class="icon-item">üîî</div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="nhac.mp3" type="audio/mpeg">
    </audio>
    <audio id="explosionSound">
    <source src="phaohoa.mp3" type="audio/mpeg">
</audio>

    <script>
        function openGift() {
            // 1. ·∫®n d√≤ng ch·ªØ g·ª£i √Ω ngay l·∫≠p t·ª©c
            var hint = document.querySelector('.click-hint');
            if (hint) hint.style.display = 'none';

            // 2. T√¨m h·ªôp qu√† v√† th√™m hi·ªáu ·ª©ng "s·∫Øp n·ªï"
            var giftBox = document.querySelector('.gift-box');
            // Th√™m class .gift-exploding ƒë·ªÉ k√≠ch ho·∫°t CSS ch√∫ng ta v·ª´a th√™m ·ªü B∆∞·ªõc 1
            giftBox.classList.add('gift-exploding'); 

            // 3. B·∫Øn m·ªôt √≠t ph√°o hoa nh·ªè ngay t·∫°i ch·ªó h·ªôp qu√† cho k·ªãch t√≠nh
            confetti({
                particleCount: 50,
                spread: 100,
                origin: { y: 0.5 }, // B·∫Øn t·ª´ gi·ªØa m√†n h√¨nh
                colors: ['#ff0000', '#ffa500'], // M√†u ƒë·ªè cam nh∆∞ l·ª≠a
                startVelocity: 30,
                gravity: 1.2
            });

            // --- CH·ªú 0.8 GI√ÇY (800ms) CHO H·ªòP QU√Ä RUNG L·∫ÆC XONG M·ªöI N·ªî TH·∫¨T ---
            // (Th·ªùi gian 800ms n√†y kh·ªõp v·ªõi animation: violent-explode 0.8s ·ªü CSS)
            setTimeout(function() {
                
                // --- B√ÇY GI·ªú M·ªöI L√Ä L√öC "B√ôM" TH·∫¨T S·ª∞ ---

                // ·∫®n m√†n h√¨nh qu√† ƒëi
                document.getElementById('gift-screen').style.display = 'none';
                // Hi·ªán m√†n h√¨nh ch√∫c m·ª´ng
                document.getElementById('celebration-screen').style.display = 'block';

                // Ph√°t ti·∫øng n·ªï l·ªõn
                var explosion = document.getElementById('explosionSound');
                if (explosion) {
                    explosion.volume = 1.0;
                    explosion.currentTime = 0; // Tua l·∫°i t·ª´ ƒë·∫ßu ƒë·ªÉ ch·∫Øc ch·∫Øn ph√°t
                    explosion.play().catch(e => console.log("Ch∆∞a t·∫£i ƒë∆∞·ª£c √¢m thanh n·ªï"));
                }

                // Ph√°t nh·∫°c n·ªÅn sau m·ªôt ch√∫t
                setTimeout(function() {
                    var music = document.getElementById('bgMusic');
                    if (music) {
                        music.volume = 0.7;
                        music.play().catch(e => console.log("Ch∆∞a t·∫£i ƒë∆∞·ª£c nh·∫°c n·ªÅn"));
                    }
                }, 300);

                // Hi·ªáu ·ª©ng ph√°o hoa l·ªõn t∆∞ng b·ª´ng
                fireworks();
                // Hi·ªáu ·ª©ng tuy·∫øt r∆°i
                setInterval(createSnowflake, 100);

            }, 800); // <-- Sau 800ms th√¨ th·ª±c hi·ªán ƒëo·∫°n trong ngo·∫∑c n√†y
        }

        // H√†m b·∫Øn ph√°o hoa
        function fireworks() {
            var duration = 3 * 1000;
            var animationEnd = Date.now() + duration;
            var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

            var interval = setInterval(function() {
                var timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                var particleCount = 50 * (timeLeft / duration);
                // B·∫Øn t·ª´ 2 b√™n ng·∫´u nhi√™n
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: Math.random(), y: Math.random() - 0.2 } }));
            }, 250);
        }

        // H√†m t·∫°o tuy·∫øt
        function createSnowflake() {
            const snowflake = document.createElement('div');
            snowflake.classList.add('snowflake');
            snowflake.innerHTML = '‚ùÑ'; // C√≥ th·ªÉ ƒë·ªïi th√†nh ‚ùÖ ho·∫∑c ‚ùÜ
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.animationDuration = Math.random() * 3 + 2 + 's';
            snowflake.style.opacity = Math.random();
            snowflake.style.fontSize = Math.random() * 20 + 10 + 'px';
            
            document.body.appendChild(snowflake);
            
            setTimeout(() => { snowflake.remove(); }, 5000);
        }
    </script>
</body>
</html>
